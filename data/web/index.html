<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>AG do Caixeiro-Viajante</title>
    <!-- SEO Meta Tags -->
    <meta
      name="description"
      content="Simulador interativo do Algoritmo Genético para o Problema do Caixeiro Viajante (TSP/PCV). Monte trajetos, visualize soluções e baixe dados para análise. Projeto da disciplina de Projeto e Análise de Algoritmos (PAA) da UFS."
    />
    <meta
      name="keywords"
      content="Caixeiro Viajante, TSP, Algoritmo Genético, Simulação, PAA, UFS, Otimização, Visualização, Inteligência Artificial, Heurística, Editor Interativo"
    />
    <meta name="author" content="ReinanHS" />
    <meta name="robots" content="index, follow" />
    <link
      rel="canonical"
      href="https://reinanhs.github.io/paa-ufs-seminario-01/"
    />
    <meta name="theme-color" content="#1f2937" />
    <!-- Open Graph / Facebook -->
    <meta property="og:title" content="AG do Caixeiro-Viajante" />
    <meta
      property="og:description"
      content="Simulador interativo do Algoritmo Genético para o Problema do Caixeiro Viajante (TSP/PCV). Monte trajetos, visualize soluções e baixe dados para análise."
    />
    <meta property="og:type" content="website" />
    <meta
      property="og:url"
      content="https://reinanhs.github.io/paa-ufs-seminario-01/"
    />
    <meta
      property="og:image"
      content="https://reinanhs.github.io/paa-ufs-seminario-01/img/thumbnail.png"
    />
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="AG do Caixeiro-Viajante " />
    <meta
      name="twitter:description"
      content="Simulador interativo do Algoritmo Genético para o Problema do Caixeiro Viajante (TSP/PCV). Monte trajetos, visualize soluções e baixe dados para análise."
    />
    <meta
      name="twitter:image"
      content="https://reinanhs.github.io/paa-ufs-seminario-01/img/thumbnail.png"
    />
    <link
      href="https://unpkg.com/maplibre-gl@3.6.2/dist/maplibre-gl.css"
      rel="stylesheet"
    />
    <script src="https://unpkg.com/maplibre-gl@3.6.2/dist/maplibre-gl.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="./style.css" />
    <script defer src="./index.js"></script>
  </head>
  <body>
    <div id="app">
      <header><h1>Algoritmo Genético - Caixeiro Viajante</h1></header>
      <main class="main-container">
        <div id="map-container">
          <div id="map"></div>
          <div class="panel">
            <div id="city-selection-panel">
              <h2>1. Monte seu trajeto</h2>
              <p>
                <b>Adicionar:</b> Clique em um local vazio no mapa.<br />
                <b>Mover:</b> Clique e arraste um ponto existente.<br />
                <b>Remover:</b> Clique em um ponto existente.
              </p>
              <div
                class="row"
                style="justify-content: center; font-size: 1.1rem"
              >
                Cidades definidas: <b id="city-count">0</b>
              </div>

              <div class="download-section">
                <p>Baixar dados do trajeto (Pontos > 2):</p>
                <div class="controls">
                  <button
                    id="btnDownloadDistances"
                    style="flex-grow: 1; min-width: 45%"
                  >
                    ⬇ Matriz de distâncias (.csv)
                  </button>
                  <button
                    id="btnDownloadPoints"
                    style="flex-grow: 1; min-width: 45%"
                  >
                    ⬇ Pontos (.csv)
                  </button>
                </div>
              </div>

              <button
                id="btnConfirmCities"
                class="primary"
                style="width: 100%; margin-top: 10px"
              >
                Próxima etapa
              </button>
            </div>

            <div id="ga-settings" style="display: none">
              <h2>2. Configure o algoritmo</h2>
              <div class="row">
                <label for="popSize">Tamanho da população</label
                ><input
                  id="popSize"
                  type="number"
                  value="150"
                  min="10"
                  max="500"
                  step="10"
                  class="config-input"
                />
              </div>

              <div class="row">
                <label for="gensPerPlay">Gerações por play</label
                ><input
                  id="gensPerPlay"
                  type="number"
                  min="1"
                  max="500"
                  step="1"
                  value="20"
                  class="config-input"
                />
              </div>

              <div class="row">
                <label for="mutRate">Taxa de mutação (%)</label
                ><input
                  id="mutRate"
                  type="number"
                  min="0"
                  max="100"
                  step="1"
                  value="5"
                  class="config-input"
                />
              </div>
              <div class="row">
                <label for="chkElitism">Utilizar elitismo</label
                ><input
                  id="chkElitism"
                  type="checkbox"
                  checked
                  style="width: 20px; height: 20px"
                />
              </div>

              <button
                id="btnStart"
                class="primary"
                style="width: 100%; margin-top: 15px"
              >
                Iniciar simulação
              </button>
            </div>

            <div id="simulation-controls" style="display: none">
              <h2>3. Simulação em andamento</h2>
              <div class="controls">
                <button id="btnPlay" class="primary">▶ Play</button>
                <button id="btnPause" class="secondary">⏸ Pausar</button>
                <button id="btnStep" class="secondary">⏭ 1 geração</button>
                <button id="btnReset" class="secondary">↺ Reiniciar</button>
              </div>
              <div class="row">
                <label for="displayMode">Modo de exibição</label
                ><select
                  id="displayMode"
                  style="
                    padding: 0.3rem;
                    border-radius: 6px;
                    background: #1f2937;
                    color: white;
                    border: 1px solid #374151;
                    width: 180px;
                  "
                >
                  <option value="1">O melhor indivíduo</option>
                  <option value="2">Os 2 melhores</option>
                  <option value="5" selected>Os 5 melhores</option>
                  <option value="10">Os 10 melhores</option>
                  <option value="all">Toda a População</option>
                </select>
              </div>
              <div class="row">
                <label for="simTime">Tempo Máx. (por Play)</label
                ><select
                  id="simTime"
                  style="
                    padding: 0.3rem;
                    border-radius: 6px;
                    background: #1f2937;
                    color: white;
                    border: 1px solid #374151;
                    width: 180px;
                  "
                >
                  <option value="60" selected>1 Minuto</option>
                  <option value="120">2 Minutos</option>
                  <option value="0">Instantâneo</option>
                </select>
              </div>
              <div class="controls" style="gap: 0.75rem; margin-top: 10px">
                <span class="stat">Geração: <b id="statGen">0</b></span
                ><span class="stat"
                  >Melhor custo (km): <b id="statCost">–</b></span
                >
              </div>
            </div>
          </div>
        </div>
        <div id="right-panel">
          <div id="project-info" class="data-card">
            <h3>Informações</h3>
            <p style="margin-bottom: 12px; font-size: 0.9rem">
              Simulador interativo do <b>Algoritmo Genético</b> para o
              <b>Problema do Caixeiro Viajante (TSP/PCV)</b>. Monte trajetos,
              visualize soluções e baixe dados para análise. Projeto da
              disciplina de projeto e análise de algoritmos da
              <a href="https://www.ufs.br/">UFS</a>.
            </p>

            <p>Para mais informações veja o repositório abaixo:</p>

            <ul>
              <li>
                <a href="https://github.com/ReinanHS/paa-ufs-seminario-01"
                  >Link para o repositório no GitHub</a
                >
              </li>
            </ul>

            <h4 style="font-size: 0.95rem; font-weight: 700; margin: 0 0 8px 0">
              Colaboradores
            </h4>
            <p>Apresentamos os principais membros da equipe:</p>
              <ul>
                <li><a href="https://github.com/ReinanHS">@reinanhs</a></li>
                <li><a href="https://github.com/pauloEzequiel">@pauloEzequiel</a></li>
                <li><a href="https://github.com/joaorabelo">@joaorabelo</a></li>
              </ul>
            </p>
            <h4
              style="
                font-size: 0.95rem;
                font-weight: 700;
                margin: 0 0 8px 0;
              "
            >
              QR Code
            </h4>
            <p>
              Escaneie o QR Code abaixo para acessar o repositório no GitHub
              diretamente do seu dispositivo móvel:
            </p>
            <img src="https://www.qrtag.net/api/qr_1280.png?url=https://github.com/ReinanHS/paa-ufs-seminario-01" alt="QR Code para o site" style="width: 100%; max-width: 200px; display: block; margin: 0 auto" />
          </div>

          <div id="ga-strategy-info" class="data-card" style="display: none">
            <h3>
              Operadores do Algoritmo Genético
            </h3>
            <p
              style="
                margin-bottom: 12px;
                font-size: 0.9rem;
                color: var(--text-secondary);
              "
            >
              As configurações abaixo influenciam diretamente a convergência e a
              qualidade da solução.
            </p>
            <div class="strategy-info" style="border-top: none; padding-top: 0">
              <h4>Componentes utilizados:</h4>
              <ul style="list-style-type: none; margin-left: 0">
                <li>
                  <span style="font-weight: bold; color: #16a34a">✅ Seleção:</span> <b>Torneio</b> (k=5). Escolhe o indivíduo de melhor <i>fitness</i> entre 5 amostras aleatórias da população.
                </li>
                <li>
                  <span style="font-weight: bold; color: #16a34a">✅ Crossover:</span> <b>Order Crossover (OX)</b>. Troca uma sub-rota entre os pais, preservando a ordem relativa dos pontos restantes. Essencial para problemas de ordenação (TSP).
                </li>
                <li>
                  <span style="font-weight: bold; color: #16a34a">✅ Mutação:</span> <b>Inversão (Inversion)</b>. Inverte a ordem de uma sub-seção aleatória da rota. A probabilidade é controlada pela <b>Taxa de Mutação</b> selecionada.
                </li>
                <li>
                  <span style="font-weight: bold; color: #16a34a">✅ Elitismo:</span> Preserva os <b>2 melhores</b> indivíduos da geração anterior (se a <i>flag</i> for ativada).
                </li>
              </ul>
            </div>
          </div>

          <div
            id="simulation-data-view"
            style="display: none; flex-direction: column; gap: 1.5rem"
          >
            <div class="data-card">
              <h3>Convergência genética</h3>
              <div id="chart-container">
                <canvas id="convergenceChart"></canvas>
              </div>
            </div>
            <div class="data-card">
              <h3>Top 10 indivíduos (Geração atual)</h3>
              <div id="top-individuals-table"></div>
            </div>
            <div class="data-card">
              <h3>Legenda das cidades</h3>
              <div id="city-legend"></div>
            </div>
          </div>
        </div>
      </main>
    </div>
  </body>
</html>
